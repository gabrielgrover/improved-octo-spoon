# The comment storage solution switch
Been a while since I showed this blog some love.  I know I know.  All zero of you have been waiting with baited breath.  When I get just one reader that will be {#ff7100}(`Infinity-X`) growth.  Take that to the [`Soft bank`](https://www.wsj.com/business/telecom/softbank-loses-6-2-billion-in-quarter-as-wework-weighs-on-investments-d37fe8b3).  Before that, let's go through my journey of moving the comment system to a different data solution.  

## But, like... why though?

The comment system was previously built with `Prisma` as the `ORM` and `PlanetScale` as the `Database as a Service`.  The reason I did that was really just for funsies.  Heard about these new solutions and wanted to try it.  The perf of `Prisma` has come under some scrutiny as of late.  Which maybe true?  I didn't have any issues there, but my use case is on the extreme end of simplicity.  That simplicity is one of the reasons why I decided to look for a different solution.  The other reason was `PlanetScale` and their pricing tier.  I could see using it for much bigger projects than a blog.  The freemium version has one restriction that really did not work for me.  After period of inactivity, i.e reads/writes, your node would be put to sleep and all requests to it will error.  To fix this, I need to login to my `PlanetScale` account and manually click a button to wake up the node.  This can be avoided if I pay 30 bucks a month.  I'm good on that. So what did I decide to replace it with?  

## The new data solution

`Offline first` apps as a concept have been around for a while.  The tooling space for `offline first` has been slowly getting better, and is at a pretty solid state at this point.  To make `offline first` apps viable it really helps if your tooling includes the sync/replication process.  A decent solution is using {#98c379}([CouchDB](https://couchdb.apache.org/)) on a server and using {#98c379}([RXDB](https://rxdb.info/)) on the client to interface with that server.  I don't want to get into the whole `SQL` vs `NOSQL` debate.  A blog is simple.  The only data I need to store are comments.  I don't need to model any complex relations.  Switching over to this new solution was simple to do in code.  As usual the hard part was on the deployment side of things.  Namely the deployment of the actual `CouchDB` container.  If you want to see the whole git diff you can look at the pr {#98c379}([here](https://github.com/gabrielgrover/improved-octo-spoon/pull/3/files)).  The `TLDR` is that I made function to initialize an `RXDB` database which you can find {#98c379}([here](https://github.com/gabrielgrover/improved-octo-spoon/pull/3/files#diff-b5373bae50579a00f0084a7f7e19c8deab0b730df038363156b3a4d8927305b8)).  I then made a `React Context Provider` that uses that function and provides an `RXDB` database to the rest of the client side react app.  You can view the Provider {#98c379}([here](https://github.com/gabrielgrover/improved-octo-spoon/pull/3/files#diff-0ad3cbadd14bab2997203bd5017601f44c241e49a42c7352b7075f56f9d0cc19)).  Next I created a hook to replace the old one that depended on `Prisma`.  You can find that hook {#98c379}([here](https://github.com/gabrielgrover/improved-octo-spoon/pull/3/files#diff-c3e3c1d4bf064f9af3f1ef776db55242e8710caa81706ab26198856625180a59)).  What I really want to go
